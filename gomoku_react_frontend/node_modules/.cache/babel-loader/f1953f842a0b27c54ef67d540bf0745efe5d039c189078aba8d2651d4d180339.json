{"ast":null,"code":"var _jsxFileName = \"/Users/uni/Documents/uni/awp/gomoku_react/src/pages/GameLog.tsx\",\n  _s = $RefreshSig$();\nimport { useContext, useCallback, useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { UserContext } from '../context';\nimport style from './GameLog.module.css';\nimport { key } from 'localforage';\nimport { get } from '../utils/http';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function GameLog() {\n  _s();\n  const {\n    user,\n    logout\n  } = useContext(UserContext);\n  const [filteredGames, setFilteredGames] = useState([]);\n\n  //const [games] = useLocalStorage<Record<string, string>>('result', {})\n  const navigate = useNavigate();\n  const fetchGames = useCallback(async () => {\n    try {\n      const userGames = await get(`/api/games/${user === null || user === void 0 ? void 0 : user._id}`);\n      setFilteredGames(userGames);\n    } catch (error) {\n      console.log(error.message);\n      logout();\n      navigate('/');\n    }\n  }, [logout, navigate, user === null || user === void 0 ? void 0 : user._id]);\n  useEffect(() => {\n    if (!user) return;\n    fetchGames();\n  }, [fetchGames, user]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: style.container,\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: style.header,\n      children: [\"You have \", filteredGames.length, \" previosly saved games\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this), filteredGames.map(({\n      _id,\n      gameId,\n      result,\n      date,\n      whiteMoves\n    }) => {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: style.list,\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: style.title,\n          children: [gameId, \" Winner:\", result]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: style.button,\n          onClick: () => navigate(`/gamehistory/${key}`),\n          children: \"View\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 25\n        }, this)]\n      }, gameId, true, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 25\n      }, this);\n    })]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 5\n  }, this);\n}\n_s(GameLog, \"3WaUby/Mzw/DEzy0NcgVdABXhbM=\", false, function () {\n  return [useNavigate];\n});\n_c = GameLog;\nvar _c;\n$RefreshReg$(_c, \"GameLog\");","map":{"version":3,"names":["useContext","useCallback","useState","useEffect","useNavigate","UserContext","style","key","get","jsxDEV","_jsxDEV","GameLog","_s","user","logout","filteredGames","setFilteredGames","navigate","fetchGames","userGames","_id","error","console","log","message","className","container","children","header","length","fileName","_jsxFileName","lineNumber","columnNumber","map","gameId","result","date","whiteMoves","list","title","button","onClick","_c","$RefreshReg$"],"sources":["/Users/uni/Documents/uni/awp/gomoku_react/src/pages/GameLog.tsx"],"sourcesContent":["import { useContext, useCallback, useState, useEffect } from 'react'\nimport { Navigate, useNavigate } from 'react-router-dom'\nimport { UserContext } from '../context'\nimport { useLocalStorage } from '../hooks'\nimport style from './GameLog.module.css'\nimport { key } from 'localforage'\n\nimport { Game } from '../types/Game'\nimport { get } from '../utils/http'\n\n\nexport default function GameLog() {\n\n    const { user, logout } = useContext(UserContext)\n    const [ filteredGames, setFilteredGames ] = useState<Game[]>([])\n\n\n    //const [games] = useLocalStorage<Record<string, string>>('result', {})\n    const navigate = useNavigate()\n\n\n\n  const fetchGames = useCallback(async () => {\n    try{\n      const userGames = await get<Game[]>(`/api/games/${user?._id}`)\n      setFilteredGames(userGames)\n    }catch (error){\n      console.log((error as Error).message)\n      logout()\n      navigate('/')\n    }\n  }, [logout, navigate, user?._id])\n\n  useEffect(() => {\n    if (!user) return\n    fetchGames()\n  }, [fetchGames, user])\n\n  \n\n\n\n    \n\n\n  return (\n    <div className={style.container}>\n      <h1 className={style.header}>You have {filteredGames.length} previosly saved games</h1>\n\n      <div>\n\n\n        \n\n      </div>\n\n            \n            {filteredGames.map(({ _id, gameId, result, date, whiteMoves }) => {\n\n                    return(\n                        <div className={style.list} key={gameId}>\n                        <p className={style.title}>\n                          {gameId} Winner:{result}\n                        </p>\n                        \n                        <button\n                          className={style.button}\n                          onClick={() => navigate(`/gamehistory/${key}`)}\n                        >\n                          View\n                        </button>\n                      </div>\n                    )\n                }\n                \n                \n                )}\n    \n\n      </div>\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}